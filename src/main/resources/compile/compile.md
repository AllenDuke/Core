# 编译原理
除开讨论一个图灵完备的语言的定义，对于一个语言的编译，还是比较简单的，一般来说，编译分为：
- 词法分析（即将输入的字符串转化为单词）。
- 语法分析（即判断输入的代码是否符合语法，例如是否使用了未定义的变量等）。
- 语义分析（即理解输入代码中各个变量、函数等之间的关系，在遍历每一个语句的过程中，通常也进行目标代码的生成）。

首先要理解，计算机的架构是基于操作数栈的。
参考java代码的编译，例如以下代码：
```java
// 计算孩子身高
class CalHeightOfChild{
	void main(){
		float x; // 定义变量，局部变量表中创建一个变量
		float y;
		float b;
		float g;
		x = 186.0; // 变量赋值，对应186.0操作数压入栈，压入局部变表，给局部变量x，ldc 186.0 fstore 0
		y = 162.0;
		b = calBoy(x,y);
		g = calGirl(x,y);
		printf("父亲身高：%f,母亲身高：%f,儿子可能的身高：%f\n",x,y,b);
		printf("父亲身高：%f,母亲身高：%f,女儿可能的身高：%f\n",x,y,g);
	}
	// 计算女儿身高，公式：(父亲身高+母亲身高+13)/2 + 7.5
	float calBoy(float f,float m){
		float rs;
		rs = (f+m+13.0)/2.0+7.5;
		return rs;
		// return 1;
	}
	// 计算女儿身高，公式：(父亲身高+母亲身高-13)/2 + 7.5
	float calGirl(float f,float m){
		return (f+m-13.0)/2.0+7.5;
	}
}
```
会被编译为：
```
; This file is automatically generated by the compiler
; Do Not Modify!

.class public CalHeightOfChild
.super java/lang/Object
.method public static main([Ljava/lang/String;)V
.limit stack 4096
.limit locals 2000
    ldc 186.0
    fstore 0
    ldc 162.0
    fstore 1
    fload 0
    fload 1
    invokestatic CalHeightOfChild/calBoy(FF)F
    fstore 2
    fload 0
    fload 1
    invokestatic CalHeightOfChild/calGirl(FF)F
    fstore 3
    ldc "父亲身高："
    astore 4
    aload 4
    getstatic java/lang/System/out Ljava/io/PrintStream;
    swap
    invokevirtual java/io/PrintStream/print(Ljava/lang/String;)V
    fload 0
    getstatic java/lang/System/out Ljava/io/PrintStream;
    swap
    invokevirtual java/io/PrintStream/print(F)V
    ldc ",母亲身高："
    astore 5
    aload 5
    getstatic java/lang/System/out Ljava/io/PrintStream;
    swap
    invokevirtual java/io/PrintStream/print(Ljava/lang/String;)V
    fload 1
    getstatic java/lang/System/out Ljava/io/PrintStream;
    swap
    invokevirtual java/io/PrintStream/print(F)V
    ldc ",儿子可能的身高："
    astore 6
    aload 6
    getstatic java/lang/System/out Ljava/io/PrintStream;
    swap
    invokevirtual java/io/PrintStream/print(Ljava/lang/String;)V
    fload 2
    getstatic java/lang/System/out Ljava/io/PrintStream;
    swap
    invokevirtual java/io/PrintStream/print(F)V
    ldc "\n"
    astore 7
    aload 7
    getstatic java/lang/System/out Ljava/io/PrintStream;
    swap
    invokevirtual java/io/PrintStream/print(Ljava/lang/String;)V
    ldc "父亲身高："
    astore 8
    aload 8
    getstatic java/lang/System/out Ljava/io/PrintStream;
    swap
    invokevirtual java/io/PrintStream/print(Ljava/lang/String;)V
    fload 0
    getstatic java/lang/System/out Ljava/io/PrintStream;
    swap
    invokevirtual java/io/PrintStream/print(F)V
    ldc ",母亲身高："
    astore 9
    aload 9
    getstatic java/lang/System/out Ljava/io/PrintStream;
    swap
    invokevirtual java/io/PrintStream/print(Ljava/lang/String;)V
    fload 1
    getstatic java/lang/System/out Ljava/io/PrintStream;
    swap
    invokevirtual java/io/PrintStream/print(F)V
    ldc ",女儿可能的身高："
    astore 10
    aload 10
    getstatic java/lang/System/out Ljava/io/PrintStream;
    swap
    invokevirtual java/io/PrintStream/print(Ljava/lang/String;)V
    fload 3
    getstatic java/lang/System/out Ljava/io/PrintStream;
    swap
    invokevirtual java/io/PrintStream/print(F)V
    ldc "\n"
    astore 11
    aload 11
    getstatic java/lang/System/out Ljava/io/PrintStream;
    swap
    invokevirtual java/io/PrintStream/print(Ljava/lang/String;)V
return
.end method
.method static calBoy(FF)F
.limit stack 4096
.limit locals 1000
    fload 0
    fload 1
    fadd
    ldc 13.0
    fadd
    ldc 2.0
    fdiv
    ldc 7.5
    fadd
    fstore 2
    fload 2
    freturn
.end method
.method static calGirl(FF)F
.limit stack 4096
.limit locals 1000
    fload 0
    fload 1
    fadd
    ldc 13.0
    fsub
    ldc 2.0
    fdiv
    ldc 7.5
    fadd
    freturn
.end method

```